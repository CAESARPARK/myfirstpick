<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>my first Pick - 돌잡이 인형</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap');

        .gamja-flower {
            font-family: 'Gamja Flower', cursive;
        }

        /* 날짜 입력란 플레이스홀더 스타일 */
        .relative input {
            color: transparent;
        }

        .relative input:focus,
        .relative input:valid {
            color: black;
        }

        .date-placeholder {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #a3a3a3;
            pointer-events: none;
            transition: all 0.2s ease-in-out;
        }
        

        /* 입력 시 플레이스홀더 숨김 */
        .relative input:focus + .date-placeholder,
        .relative input:valid + .date-placeholder {
            opacity: 0;
        }

        .hidden {
            display: none;
        }

        /* 구성 선택하기 */
        .package-option {
    border-bottom: 1px solid #ddd;
    text-align: left; /* ✅ 드롭다운 목록 왼쪽 정렬 */
}

.package-option:last-child {
    border-bottom: none;
}

#toggleDropdown {
    text-align: left; /* ✅ 버튼 텍스트 왼쪽 정렬 */
    color: #a3a3a3; /* ✅ 기본 텍스트 색상 설정 */
}

#toggleDropdown.selected {
    color: #333; /* ✅ 선택 후 텍스트 색상 변경 */
}

.selected {
    color: #e91e63;
}

        * 🏆 [새로운 스타일] 고정된 예약 버튼 */
.fixed-reserve-btn {
    position: fixed;
    bottom: 20px;  /* 아래에서 20px 띄움 */
    right: 20px;  /* 오른쪽에서 20px 띄움 */
    background-color: #e12a67;
    color: white;
    padding: 14px 20px;
    border-radius: 50px;
    font-size: 16px;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease-in-out;
    z-index: 1000; /* 다른 요소 위에 표시 */
}

/* 🏆 호버 시 색상 변경 */
.fixed-reserve-btn:hover {
    background-color: #e389aa;
}

/* 🏆 모바일에서는 크기 조정 */
@media (max-width: 768px) {
    .fixed-reserve-btn {
        padding: 12px 18px;
        font-size: 14px;
        bottom: 15px;
        right: 15px;
    }
}

/* 🏆 예약 섹션 도달 시 버튼 숨김 */
.hidden-btn {
    opacity: 0;
    visibility: hidden;

    </style>
</head>
<body class="bg-gray-100">

    <!-- Hero Section -->
    <section class="relative w-full h-screen bg-cover bg-center flex flex-col items-center justify-center text-center px-6"
        style="background-image: url('히어로 섹션.png'); background-color: rgba(255, 250, 245, 0.8); background-blend-mode: light;">
        
        <p class="absolute top-20 text-4xl md:text-5xl font-bold text-transparent bg-clip-text 
                  bg-gradient-to-r from-pink-400 to-red-400 gamja-flower">
            my first Pick
        </p>
                
        <div class="mt-12 md:mt-24 text-gray-800 text-3xl md:text-5xl font-bold">
            <p>내 아이의 첫 번째 선택을</p>
            <p class="mt-2 md:mt-10">간직하세요.</p>
        </div>

 <!-- 기존 버튼  <a href="#reserve" onclick="scrollToReserve(event)" class="mt-12 inline-block bg-pink-400 hover:bg-pink-500 text-white px-6 py-3 rounded-lg text-lg transition font-bold shadow-lg">
            사전 예약하기
        </a> -->
        
       <!-- 🏆 오른쪽 아래 따라오는 예약 버튼 -->
<a href="#reserve" onclick="scrollToReserve(event)" id="floatingReserveBtn" class="fixed-reserve-btn">
    예약하기 📅
</a>
    </section>

    <!-- Product Details -->
    <section class="max-w-4xl mx-auto px-6 py-16 text-gray-800">
        <h2 class="text-3xl font-bold text-center text-pink-500">첫 번째 생일의 추억을 소중하게 간직하세요.</h2>
        <p class="mt-3 md:mt-8 text-lg text-gray-700 text-center">
            🔹 돌잡이에 평균 사용되는 비용이 얼마 (소규모로 했을 때 평균 200~300만원)<br>
            🔹 장소대여, 식사, 답례품, 돌상 설치 (사진영상, 한복대여, 헤어 메이크업, 사회자 등등) 소비<br>
            🔹 그런데 기억에 남는건,

            힘들었던 기억 뿐
        </p>
    </div>
        <p class="mt-6 text-lg leading-relaxed text-center text-gray-700">
            한 개 옷 구매 시 <strong>39,000원</strong>, 6세트 구매 시 <strong>69,000원</strong> 입니다.
        </p>
        <p class="mt-4 text-lg text-center text-red-500 font-semibold">평생 한 번 뿐인 생일을 치킨 3마리와 바꾸지 마세요.</p>

        <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-8">
            <img src="히어로 섹션.png" alt="돌잡이 인형" class="w-full rounded-lg shadow-lg">
            <div>
                <p class="text-lg text-gray-700">첫 번째 선택의 순간을 인형을 보며 내 아이와 함께 이야기 나누세요.</p>
                <p class="mt-4 text-lg text-gray-700">정말 특별한 경험이 될 것입니다. 그리고 소중한 추억을 선물할 것입니다.</p>
                <img src="히어로 섹션.png" alt="아기 인형" class="w-24 mt-6 mx-auto">
            </div>
        </div>
    </section>

    <!-- 추가 제품 상세 섹션 -->
    <section class="bg-white py-16">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold text-gray-800 mt-6 bg-gray-100 p-6 rounded-lg shadow-md">제품 상세 정보</h2>


            <div class="mt-10 grid grid-cols-2 md:grid-cols-3 gap-6">
                <div><img src="히어로 섹션.png" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 A</p></div>
                <div><img src="히어로 섹션.png" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 B</p></div>
                <div><img src="히어로 섹션.png" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 C</p></div>
                <div><img src="/Users/parkbook/Coding/챗 gpt/2.webp" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 D</p></div>
                <div><img src="/Users/parkbook/Coding/챗 gpt/1.webp" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 E</p></div>
                <div><img src="/Users/parkbook/Coding/챗 gpt/1.webp" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 F</p></div>
            </div>
            <div class="mt-6 bg-gray-100 p-6 rounded-lg shadow-md">
                <p class="text-lg text-gray-700 text-left">
                    🔹 돌잡이 인형은 아이의 첫 번째 선택을 기념하기 위한 특별한 아이템입니다.<br>
                    🔹 고급 원단을 사용하여 부드러운 촉감을 제공합니다.<br>
                    🔹 다양한 직업 의상으로 창의적인 경험을 선사합니다.
                </p>
            </div>
        </div>
    </section>

    <!-- 상세 섹션 -->
    <section class="bg-white py-16">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold text-gray-800 mt-6 bg-gray-100 p-6 rounded-lg shadow-md">💰 판매 구성 & 가격 💰</h2>
            <div class="mt-10 grid grid-cols-2 md:grid-cols-3 gap-6">
                <div><img src="최종본 토끼.png" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 A</p></div>
                <div><img src=""최종본 토끼.png" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 B</p></div>
                <div><img src=""최종본 토끼.png" class="w-full rounded-lg shadow-md"><p class="mt-2 text-lg text-gray-700">디자인 C</p></div>
            </div>
            <div class="mt-6 bg-gray-100 p-6 rounded-lg shadow-md">
                <p class="text-lg text-gray-700">
                    🔹 돌잡이 인형은 아이의 첫 번째 선택을 기념하기 위한 특별한 아이템입니다.<br>
                    🔹 고급 원단을 사용하여 부드러운 촉감을 제공합니다.<br>
                    🔹 다양한 직업 의상으로 창의적인 경험을 선사합니다.
                </p>
            </div>
        </div>
        
    </section>

     <!-- Reservation Section -->
     <section id="reserve" class="bg-white py-16">
        <div class="max-w-lg mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold text-gray-800"> [ Reservation Now ]  </h2>

            <div class="mt-6 space-y-4">
                <input type="text" id="name" class="w-full px-4 py-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-400" placeholder="이름">
                <input type="tel" id="phone" class="w-full px-4 py-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-400" placeholder="연락처">
                
                <!-- 날짜 입력 필드 (모바일에서도 플레이스홀더 표시) -->
                <div class="relative">
                    <input type="date" id="partyDate" class="w-full px-4 py-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-400" required>
                    <span class="date-placeholder">돌잔치 날짜</span>
                </div>
                
                <!-- 추가된 '구성 선택하기' 섹션 -->
                <!-- 구성 선택하기 드롭다운 -->
                <div class="mt-6 space-y-4">
                
                    <!-- 드롭다운 버튼을 입력 필드처럼 보이게 -->
                    <div class="relative">
                        <button id="toggleDropdown" class="w-full px-4 py-3 border border-pink-300 rounded-lg bg-white text-gray-300 text-left focus:ring-2 focus:ring-pink-400">
                            구성 선택하기
                        </button>
                
                        <!-- 선택 목록 (초기에는 숨김) -->
                        <div id="packageDropdown" class="hidden absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10">
                            <div class="package-option p-3 hover:bg-gray-100 cursor-pointer" data-value="인형 1개 + 의상 1벌 = 39,800원">
                                ✔️ 인형 1개 + 직업 1개 = 39,800원
                            </div>
                            <div class="package-option p-3 hover:bg-gray-100 cursor-pointer" data-value="(🎊 10,000원 할인 🎊) 인형 1개 + 의상 3벌 = 59,800원 ">
                                ✔️ 인형 1개 + 직업 3개 = <del>69,800</del> → <strong>59,800원</strong> (선주문 할인)
                            </div>
                            <div class="package-option p-3 hover:bg-gray-100 cursor-pointer" data-value="(🎊 20,000원 할인 🎊) 인형 1개 + 의상 6벌 = 69,800원 ">
                                ✔️ 인형 1개 + 직업 6개 = <del>89,800</del> → <strong>69,800원</strong> (선주문 할인)
                            </div>
                        </div>
                    </div>
                </div>

                <textarea id="message" class="w-full px-4 py-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-400" rows="3" placeholder="문의하기"></textarea>
            </div>

            <button onclick="confirmReservation()" class="mt-6 w-full bg-pink-400 hover:bg-pink-500 text-white px-6 py-3 rounded-lg text-lg transition shadow-lg">
                🗓️ 사전 예약하기
            </button>
        </div>
    </section>

</section>

<script>
    function scrollToReserve(event) {
        event.preventDefault();
        document.getElementById("reserve").scrollIntoView({ behavior: "smooth" });
    }

    // 🏆 스크롤 이벤트로 버튼 숨기기
window.addEventListener("scroll", function () {
    const reserveSection = document.getElementById("reserve");
    const reserveBtn = document.getElementById("floatingReserveBtn");
    const rect = reserveSection.getBoundingClientRect();

    // 예약 섹션이 화면에 보이면 버튼 숨김
    if (rect.top <= window.innerHeight && rect.bottom >= 0) {
        reserveBtn.classList.add("hidden-btn");
    } else {
        reserveBtn.classList.remove("hidden-btn");
    }
});

    // 구성 선택하기
    document.addEventListener("DOMContentLoaded", function () {
    const toggleButton = document.getElementById("toggleDropdown");
    const dropdown = document.getElementById("packageDropdown");
    const packageOptions = document.querySelectorAll(".package-option");

    // 드롭다운 버튼 클릭 시 목록 표시/숨김
    toggleButton.addEventListener("click", function () {
        dropdown.classList.toggle("hidden");
    });

    // 옵션 클릭 시 선택 반영
    packageOptions.forEach(option => {
        option.addEventListener("click", function () {
            const selectedPackage = this.getAttribute("data-value");

            // 선택한 값 버튼에 반영 (왼쪽 정렬 유지)
            toggleButton.textContent = selectedPackage;
            toggleButton.classList.add("selected");
            toggleButton.style.textAlign = "left"; /* ✅ 선택 후에도 왼쪽 정렬 유지 */
            toggleButton.style.color = "#333"; /* ✅ 선택 후 텍스트 색상을 검정으로 변경 */

            // 목록 닫기
            dropdown.classList.add("hidden");
        });
    });

    // 다른 곳 클릭하면 드롭다운 닫기
    document.addEventListener("click", function (event) {
        if (!toggleButton.contains(event.target) && !dropdown.contains(event.target)) {
            dropdown.classList.add("hidden");
        }
    });
});

    function formatDate(dateString) {
        // 날짜 형식이 YYYY-MM-DD인지 확인
        if (!dateString || dateString.indexOf("-") === -1) return "잘못된 날짜";

        const parts = dateString.split("-");
        const year = parts[0];
        const month = parseInt(parts[1], 10); // 앞의 0 제거
        const day = parseInt(parts[2], 10);

        return `${year}년 ${month}월 ${day}일`;
    }

    function confirmReservation() {
        const name = document.getElementById("name").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const partyDateRaw = document.getElementById("partyDate").value;
        const message = document.getElementById("message").value.trim();
        const selectedPackage = document.getElementById("toggleDropdown").textContent.trim(); // ✅ 수정: 선택된 옵션 가져오기
    
        if (name === "" || phone === "" || partyDateRaw === "") {
            alert("이름, 연락처, 돌잔치 날짜를 입력해주세요.");
            return;
        }

        if (selectedPackage === "구성 선택하기") {
        alert("구성 선택하기 옵션을 선택해주세요.");
        return;
    }

        const partyDateFormatted = formatDate(partyDateRaw); // 날짜 변환

        // 예약 데이터 생성
        const reservationData = {
            name: name,
            phone: phone,
            partyDate: partyDateFormatted, // 변환된 날짜 사용
            package: selectedPackage,
            message: message
        };

        // Webhook으로 데이터 전송
        fetch("https://hook.us2.make.com/9iyvst17f25aug5h0rjd30785esuwq18", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(reservationData)
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`서버 응답 오류: ${response.status} ${response.statusText}`);
            }
            return response.text();
        })
        .then(responseText => {
            console.log("서버 응답:", responseText); // 서버 응답 로그 출력
            openConfirmationPage(name, partyDateFormatted, selectedPackage);
        })
        .catch(error => {
            console.error("예약 전송 실패:", error);
            alert("예약 전송에 실패했습니다. 다시 시도해주세요.\n오류 메시지: " + error.message);
        });
    }

    function openConfirmationPage(name, partyDate, selectedPackage) {
        const newWindow = window.open("", "_blank");

        if (newWindow) {
            newWindow.document.write(`
                <!DOCTYPE html>
                <html lang="ko">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>예약 완료</title>
                    <style>
                        body {
                            font-family: 'Pretendard', sans-serif;
                            background-color: #FFF9F4;
                            text-align: center;
                            padding: 50px;
                        }
                        .container {
                            max-width: 500px;
                            margin: auto;
                            background: white;
                            padding: 30px;
                            border-radius: 10px;
                            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                        }
                        h1 { color: #E91E63; }
                        p { font-size: 18px; color: #555; }
                    </style>
                </head>
                <body>
                    <div class="container">
                        <h1>🎉 예약이 완료되었습니다!</h1>
                        <p><strong>${name}</strong>님, 예약해 주셔서 감사합니다.🙇🏻</p>
                        <p>📅 돌잔치 날짜: <strong>${partyDate}</strong></p>
                        <p>🧸 선택한 구성: </br>${selectedPackage}</p>                        
                        <p>빠른 시일 내에 연락드리겠습니다.</p>
                        <p>my first Pick</p>
                    </div>
                </body>
                </html>
            `);
            newWindow.document.close();
        } else {
            alert("팝업 차단이 활성화되어 있습니다. 새 창을 허용해주세요.");
        }
    }
</script>

</body>
</html>
